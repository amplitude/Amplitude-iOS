<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>ISPCertificatePinning Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1333)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">Amplitude </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Amplitude Inc.</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/setupSSLPinsUsingDictionnary:">+ setupSSLPinsUsingDictionnary:</option>
		
		<option value="//api/name/verifyPinnedCertificateForTrust:andDomain:">+ verifyPinnedCertificateForTrust:andDomain:</option>
		
	</optgroup>
	

	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">ISPCertificatePinning Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>ISPCertificatePinning.h<br />ISPCertificatePinning.m</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>This class implements certificate pinning utility functions.</p>

<p>First, the certificates and domains to pin should be loaded using
<a href="#//api/name/setupSSLPinsUsingDictionnary:">setupSSLPinsUsingDictionnary:</a>. This method will store them in
&ldquo;~/Library/SSLPins.plist&rdquo;.</p>

<p>Then, the <a href="#//api/name/verifyPinnedCertificateForTrust:andDomain:">verifyPinnedCertificateForTrust:andDomain:</a> method can be
used to validate that at least one the certificates pinned to a
specific domain is in the server&rsquo;s certificate chain when connecting to
it. This method should be used for example in the
connection:willSendRequestForAuthenticationChallenge: method of the
NSURLConnectionDelegate object that is used to perform the connection.</p>

<p>Alternatively, the <a href="../Classes/ISPPinnedNSURLSessionDelegate.html">ISPPinnedNSURLSessionDelegate</a> or
<a href="../Classes/ISPPinnedNSURLConnectionDelegate.html">ISPPinnedNSURLConnectionDelegate</a> classes can be directly used
to create a delegate class performing certificate pinning.</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/setupSSLPinsUsingDictionnary:" title="setupSSLPinsUsingDictionnary:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setupSSLPinsUsingDictionnary:">+&nbsp;setupSSLPinsUsingDictionnary:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Certificate pinning loading method</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (BOOL)setupSSLPinsUsingDictionnary:(NSDictionary *)<em>domainsAndCertificates</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>certificates</code></th>
						<td><p>a dictionnary with domain names as keys and arrays of DER-encoded certificates as values</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>BOOL successfully loaded the public keys and domains</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Certificate pinning loading method</p>

<p>This method takes a dictionary with domain names as keys and arrays of DER-
encoded certificates as values, and stores them in a pre-defined location on
the filesystem. The ability to specify multiple certificates for a single
domain is useful when transitioning from an expiring certificate to a new one.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">ISPCertificatePinning.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/verifyPinnedCertificateForTrust:andDomain:" title="verifyPinnedCertificateForTrust:andDomain:"></a>
	<h3 class="method-title"><code><a href="#//api/name/verifyPinnedCertificateForTrust:andDomain:">+&nbsp;verifyPinnedCertificateForTrust:andDomain:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Certificate pinning validation method</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (BOOL)verifyPinnedCertificateForTrust:(SecTrustRef)<em>trust</em> andDomain:(NSString *)<em>domain</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>trust</code></th>
						<td><p>the trust object whose certificate chain must contain the certificate previously pinned to the given domain</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>domain</code></th>
						<td><p>the domain we&rsquo;re trying to connect to</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>BOOL found the domain&rsquo;s pinned certificate in the trust object&rsquo;s certificate chain</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Certificate pinning validation method</p>

<p>This method accesses the certificates previously loaded using the
<a href="#//api/name/setupSSLPinsUsingDictionnary:">setupSSLPinsUsingDictionnary:</a> method and inspects the trust object&rsquo;s
certificate chain in order to find at least one certificate pinned to the
given domain. SecTrustEvaluate() should always be called before this method to
ensure that the certificate chain is valid.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">ISPCertificatePinning.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2021 Amplitude Inc. All rights reserved. Updated: 2021-01-07</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1333)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>